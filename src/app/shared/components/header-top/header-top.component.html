<div class="header-topnav">
  <div class="container">
    <mat-toolbar class="topnav">
      <!-- App Logo -->
      <div fxLayout="column" style="color: #6b9b6d;" fxLayoutAlign="center" class="topbar-branding">
        beatblender.com
        <!-- <img src="assets/images/egret.png" alt="" class="app-logo"> -->
      </div>
      <!-- <div class="tiktok"></div> -->

      <ul class="menu p-0" *ngIf="!layoutConf.isMobile">
        <li *ngFor="let item of menuItems; let i = index;">
          <div *ngIf="item.type !== 'separator'" routerLinkActive="open">
            <a matRipple routerLink="/{{item.state}}" *ngIf="item.type === 'link'">
              <mat-icon>{{item.icon}}</mat-icon> 
              {{item.name | translate}}
            </a>
            <div *ngIf="item.type === 'dropDown'" fxLayoutAlign="center center">
              <label matRipple for="drop-{{i}}" class="toggle"><mat-icon>{{item.icon}}</mat-icon> {{item.name | translate}}</label>
              <a mat-flat-button color="primary" class="mat-elevation-z0 menu-item"><mat-icon>{{item.icon}}</mat-icon> {{item.name | translate}}</a>
              <input type="checkbox" id="drop-{{i}}" />
              <ul>
                <li *ngFor="let itemLvL2 of item.sub; let j = index;" routerLinkActive="open">
                  <a matRipple routerLink="{{item.state ? '/'+item.state : ''}}/{{itemLvL2.state}}" 
                  *ngIf="itemLvL2.type !== 'dropDown'">
                    <mat-icon *ngIf="itemLvL2.icon">{{itemLvL2.icon}}</mat-icon>  
                    {{itemLvL2.name | translate}}
                  </a>
                  
                  <div *ngIf="itemLvL2.type === 'dropDown'">
                    <label matRipple for="drop-{{i}}{{j}}" class="toggle">{{itemLvL2.name | translate}}</label>
                    <a matRipple><mat-icon *ngIf="itemLvL2.icon">{{itemLvL2.icon}}</mat-icon>  {{itemLvL2.name | translate}}</a>
                    <input type="checkbox" id="drop-{{i}}{{j}}" />
                    <!-- Level 3 -->
                    <ul>
                      <li *ngFor="let itemLvL3 of itemLvL2.sub" routerLinkActive="open">
                        <a matRipple routerLink="{{item.state ? '/'+item.state : ''}}{{itemLvL2.state ? '/'+itemLvL2.state : ''}}/{{itemLvL3.state}}">
                          <mat-icon *ngIf="itemLvL3.icon">{{itemLvL3.icon}}</mat-icon>
                          {{itemLvL3.name | translate}}
                        </a>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </li>
      </ul>
      <span fxFlex></span>
      <!-- End Navigation -->
      
      <!-- Language Switcher -->
      <section fxLayout="row" fxLayoutAlign="center center" class="full-height">
        <!-- <mat-select 
        *ngIf="!layoutConf.isMobile"
        placeholder=""
        id="langToggle"
        [style.width]="'auto'"
        name="currentLang"
        [(ngModel)]="currentLang" 
        (selectionChange)="setLang()"
        class="topbar-button-right">
          <mat-option 
          *ngFor="let lang of availableLangs" 
          [value]="lang.code" ngDefaultControl>{{ lang.name }}</mat-option>
        </mat-select> -->
        <!-- Theme Switcher -->
        <!-- <button 
        mat-icon-button
        id="schemeToggle" 
        [style.overflow]="'visible'"
        matTooltip="Color Schemes"
        [matMenuTriggerFor]="themeMenu"
        class="topbar-button-right">
          <mat-icon>format_color_fill</mat-icon>
        </button> -->
        <!-- <mat-menu #themeMenu="matMenu">
          <mat-grid-list
          class="theme-list" 
          cols="2" 
          rowHeight="48px">
            <mat-grid-tile 
            *ngFor="let theme of egretThemes"
            (click)="changeTheme(theme)">
              <div mat-menu-item [title]="theme.name">
                <div [style.background]="theme.baseColor" class="egret-swatch"></div>
                <mat-icon class="active-icon" *ngIf="theme.isActive">check</mat-icon>
              </div>
            </mat-grid-tile>
          </mat-grid-list>
        </mat-menu> -->
        <!-- Notification toggle button -->
        <button 
        mat-icon-button
        matTooltip="Notifications" 
        (click)="toggleNotific()"
        [style.overflow]="'visible'" 
        class="topbar-button-right">
          <mat-icon>notifications</mat-icon>
          <span class="notification-number mat-bg-warn">3</span>
        </button>
        <!-- Top left user menu -->
        <button fxFlex *ngIf="!isAuth()" mat-raised-button color="accent" (click)="login()" style="color: white; min-width: 150px;">
          <!-- <mat-icon inline="true">login</mat-icon> -->
          <!-- <mat-icon inline="false">face</mat-icon> -->
          Login
        </button>
        <a *ngIf="isAuth()" fxLayout="row" class="profile-menu-trigger full-height px-16" [matMenuTriggerFor]="accountMenu"
        
        >
        <!-- [matRippleRadius]="radius" -->
        <!-- [matRippleColor]="color" -->
          <div fxLayout="column" class="trigger-text-container py-2 px-8">
            <span class="fs-12 lh-12 mt-auto">{{getRole()}}</span>
            <span class="fs-12 lh-12 mb-auto">LEP-Balance: 12 <i><strong>LEP</strong></i></span>
          </div>
          <div fxLayout="row" fxFlex="48px" fxLayoutAlign="center center" class="">
            <img src="assets/images/typ.jpg" alt="" style="width: 40px; height: 40px; border-radius: 50%;"> 
          </div>
        </a>
        <mat-menu #accountMenu="matMenu">
          <button mat-menu-item [routerLink]="['/profile/overview']">
            <mat-icon>account_box</mat-icon>
            <span>Profile</span>
          </button>
          <button mat-menu-item [routerLink]="['/profile/settings']">
            <mat-icon>settings</mat-icon>
            <span>Account Settings</span>
          </button>
          <button mat-menu-item>
            <mat-icon>notifications_off</mat-icon>
            <span>Disable alerts</span>
          </button>
          <button mat-menu-item (click)="logoff()">
            <mat-icon>exit_to_app</mat-icon>
            <span>Sign out</span>
          </button>
        </mat-menu>
        <!-- Mobile screen menu toggle -->
        <button 
        mat-icon-button 
        class="mr-16" 
        (click)="toggleSidenav()" 
        *ngIf="layoutConf.isMobile">
          <mat-icon>menu</mat-icon>
        </button>
      </section>

    </mat-toolbar>
  </div>
</div>